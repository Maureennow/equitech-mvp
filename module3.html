<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Module 3 - EquiTech</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav>
      <a href="index.html">Dashboard</a> | <a href="module1.html">Module 1</a> |
      <a href="module2.html">Module 2</a> |
      <a href="module3.html">Module 3</a>
    </nav>

    <h1>Module 3 Quiz</h1>

    <label for="student-select">Student:</label>
    <select id="student-select"></select>

    <form id="quiz-form">
      <p>1. What does JavaScript do?</p>
      <label
        ><input type="radio" name="q1" value="100" /> Makes web pages
        interactive</label
      ><br />
      <label><input type="radio" name="q1" value="0" /> Styles web pages</label
      ><br />

      <p>2. How do you write a comment in JavaScript?</p>
      <label>
        <input type="radio" name="q2" value="100" /> // This is a comment </label
      ><br />
      <label>
        <input type="radio" name="q2" value="0" />
        <!-- This is an HTML comment, just text -->
        &lt;!-- This is an HTML comment --&gt; </label
      ><br />
      <p>3. Which symbol is used for assignment?</p>
      <label><input type="radio" name="q3" value="100" /> =</label><br />
      <label><input type="radio" name="q3" value="0" /> ==</label><br /><br />

      <button type="button" id="submit-btn">Submit Quiz</button>
    </form>

    <script>
      const studentSelect = document.getElementById("student-select");
      const submitBtn = document.getElementById("submit-btn");
      const form = document.getElementById("quiz-form");

      function populateStudentDropdown() {
        const students = JSON.parse(localStorage.getItem("students")) || [];
        studentSelect.innerHTML = "";
        students.forEach((student, index) => {
          const option = document.createElement("option");
          option.value = index;
          option.textContent = student.name;
          studentSelect.appendChild(option);
        });
      }

      submitBtn.addEventListener("click", () => {
        const studentIndex = parseInt(studentSelect.value);
        const students = JSON.parse(localStorage.getItem("students")) || [];
        let score = 0;

        ["q1", "q2", "q3"].forEach((q) => {
          const selected = form.querySelector(`input[name="${q}"]:checked`);
          if (selected) score += parseInt(selected.value);
        });

        if (!students[studentIndex]) {
          students[studentIndex] = { name: "Unknown", modulesCompleted: [] };
        }

        // Module 3 = index 2
        students[studentIndex].modulesCompleted[2] = score;
        localStorage.setItem("students", JSON.stringify(students));
        alert(
          `Score saved! Student scored ${score}% on Module 3. Refresh dashboard to see updates.`
        );
      });

      populateStudentDropdown();
    </script>
  </body>
</html>
